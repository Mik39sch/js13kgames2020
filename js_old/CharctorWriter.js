export default class CharacterWriter
{
    constructor(index)
    {
        if (!CHARACTER_DATA[index]) {
            index = 'normal';
        }
        this.mImageData = CHARACTER_DATA[index];

        this.posY = 0;
        this.posX = 0;

        this.isTurn = false;
        this.moving = false;
        this.jumping = false;
        this.jumpTimer = 0;
        this.jumpStartPos = 0;
        this.standing = false;
    }

    turn(inTurn)
    {
        if (inTurn === this.isTurn) {
            return;
        }
        this.isTurn = inTurn;
        let turnImg = [];
        for (let row = 0; row < this.mImageData.length; row++) {
            let tmp = [];
            for (let col = this.mImageData[row].length-1; col >= 0; col--) {
                tmp.push(this.mImageData[row][col]);
            }
            turnImg.push(tmp);
        }
        this.mImageData = turnImg;
    }

    getStandingPosition()
    {
        let standPosY = (this.posY/PIXEL_SIZE + this.mImageData.length),
            standPosX = [];

        const img = this.mImageData[this.mImageData.length-1];
        for (let col=0;col < img.length; col++) {
            if ("F" !== img[col]) {
                standPosX.push(col + this.posX/PIXEL_SIZE);
            }
        }

        return {'x': standPosX, 'y': standPosY};
    }
}

const CHARACTER_DATA = {
    'normal': [
        ['F','F','F','F','F','F','F','F','F','F','F','F','F','F','F'],
        ['F','F','F','F','F','F','F','F','F','F','F','F','F','F','F'],
        ['F','F','F','F','F','F','F','F','F','F','F','F','F','F','F'],
        ['F','F','F','2','2','2','2','2','2','2','2','F','F','F','F'],
        ['F','F','2','1','1','1','1','1','1','1','1','2','F','F','F'],
        ['F','F','2','1','1','1','1','1','1','1','1','2','F','F','F'],
        ['F','F','2','1','2','1','1','2','1','1','1','2','F','F','F'],
        ['F','F','2','1','1','1','1','1','1','1','1','2','F','F','F'],
        ['F','F','2','1','1','1','1','1','1','1','1','2','F','F','F'],
        ['F','F','2','1','1','1','1','1','1','1','1','2','F','F','F'],
        ['F','F','F','2','2','2','2','2','2','2','2','F','F','F','F'],
        ['F','F','F','F','2','1','1','1','1','2','F','F','F','F','F'],
        ['F','F','F','2','2','1','1','1','2','2','F','F','F','F','F'],
        ['F','F','2','F','2','1','1','2','1','2','F','F','F','F','F'],
        ['F','F','F','F','2','1','1','1','1','2','F','F','F','F','F'],
        ['F','F','F','F','2','2','2','2','2','2','F','F','F','F','F'],
        ['F','F','F','F','F','2','F','F','2','F','F','F','F','F','F'],
    ],
    'snowman': [
        ['F','F','F','2','2','2','2','2','2','2','2','F','F','F','F'],
        ['F','F','F','2','2','2','2','2','2','2','2','F','F','F','F'],
        ['F','F','F','2','2','2','2','2','2','2','2','F','F','F','F'],
        ['F','F','F','3','3','3','3','3','3','3','3','F','F','F','F'],
        ['F','2','2','2','2','2','2','2','2','2','2','2','2','F','F'],
        ['F','F','2','1','1','1','1','1','1','1','1','2','F','F','F'],
        ['F','F','2','1','2','1','1','2','1','1','1','2','F','F','F'],
        ['F','F','2','4','1','1','1','1','4','4','1','2','F','F','F'],
        ['F','F','2','1','1','1','1','1','1','1','1','2','5','5','F'],
        ['F','F','2','5','5','6','5','5','6','5','5','6','F','F','F'],
        ['F','F','F','5','6','5','5','6','5','5','6','F','F','F','F'],
        ['F','F','F','F','2','1','1','1','1','2','F','F','F','F','F'],
        ['F','F','F','7','2','1','1','1','7','2','F','F','F','F','F'],
        ['F','F','7','F','2','1','1','7','1','2','F','F','F','F','F'],
        ['F','F','F','F','2','1','1','1','1','2','F','F','F','F','F'],
        ['F','F','F','F','2','1','1','1','1','2','F','F','F','F','F'],
        ['F','F','F','F','2','2','2','2','2','2','F','F','F','F','F'],
   'F'],
    'bear': [
        ['F','F','F','F','F','F','F','F','F','F','F','F','F','F','F'],
        ['F','F','F','F','F','F','F','F','F','F','F','F','F','F','F'],
        ['F','F','2','F','F','F','F','F','F','F','2','2','F','F','F'],
        ['F','2','7','2','2','2','2','2','2','2','7','7','2','F','F'],
        ['F','2','7','7','7','7','7','7','7','7','7','7','2','F','F'],
        ['F','F','2','7','7','7','7','7','7','7','7','2','F','F','F'],
        ['F','F','2','7','7','7','7','7','7','7','7','2','F','F','F'],
        ['F','F','2','7','3','7','7','3','7','7','7','2','F','F','F'],
        ['F','F','2','7','8','2','8','8','8','7','7','2','F','F','F'],
        ['F','F','2','8','2','8','2','2','8','8','7','2','F','F','F'],
        ['F','F','F','2','8','8','8','8','8','7','2','F','F','F','F'],
        ['F','F','F','F','2','7','7','7','7','2','F','F','F','F','F'],
        ['F','F','F','2','2','7','7','7','2','2','F','F','F','F','F'],
        ['F','F','2','F','2','7','7','2','7','2','F','F','F','F','F'],
        ['F','F','F','F','2','7','7','7','7','2','F','F','F','F','F'],
        ['F','F','F','F','2','2','2','2','2','2','F','F','F','F','F'],
        ['F','F','F','F','F','2','F','F','2','F','F','F','F','F','F'],
   'F'],
    'sheep': [
        ['F','F','F','F','F','F','F','F','F','F','F','F','F','F','F'],
        ['F','F','F','F','F','F','F','F','F','F','F','F','F','F','F'],
        ['F','F','F','F','F','F','F','F','F','F','F','F','F','F','F'],
        ['F','F','9','9','2','2','2','2','2','2','2','9','9','F','F'],
        ['F','9','2','9','1','1','1','1','1','1','9','9','2','9','F'],
        ['F','9','2','9','1','1','1','1','1','1','9','2','9','9','F'],
        ['F','F','9','1','2','2','2','2','1','1','1','9','9','F','F'],
        ['F','F','2','2','1','2','2','1','2','2','1','2','F','F','F'],
        ['F','F','2','4','2','2','2','2','4','4','1','2','F','F','F'],
        ['F','F','2','2','2','2','2','2','2','2','1','2','F','F','F'],
        ['F','F','F','2','2','2','2','2','2','1','2','F','F','F','F'],
        ['F','F','F','2','1','1','1','1','1','1','2','F','F','F','F'],
        ['F','F','2','2','1','1','1','1','1','2','2','F','F','F','F'],
        ['F','2','F','2','1','1','1','1','2','1','2','F','F','F','F'],
        ['F','F','F','2','1','1','1','1','1','1','2','F','F','F','F'],
        ['F','F','F','2','1','1','1','1','1','1','2','F','F','F','F'],
        ['F','F','F','2','2','2','2','2','2','2','2','F','F','F','F'],
    ]
};